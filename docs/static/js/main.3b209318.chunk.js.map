{"version":3,"sources":["component/FileAdd.js","iOSIconJson.js","App.js","reportWebVitals.js","index.js"],"names":["FileAdd","props","onChange","inputEl","React","useRef","useState","undefined","imgSrc","setImgSrc","className","src","alt","onClick","ref","type","accept","id","e","file","current","files","reader","FileReader","onload","imgUrl","this","result","url","readAsDataURL","iOSIcon","App","setFile","sizeIOS","sizeAndroid","useEffect","img","Image","h","height","w","width","console","warn","titleIOS","document","createElement","titleIOSText","createTextNode","style","marginTop","marginBottom","fontSize","appendChild","getElementById","map","size","createCanvas","titleAndroid","titleAndroidText","androidIcon","zip","JSZip","iOSFolder_appicon","folder","androidFolder","androidFolder_m","androidFolder_h","androidFolder_x","androidFolder_xx","androidFolder_xxx","JSON","stringify","iOSIconJson","forEach","item","base64data","ctx","canvas","toDataURL","match","base64","base64dataRound","ctxRound","generateAsync","then","content","saveAs","platform","canv","canvRound","setAttribute","getContext","drawImage","data","arc","Math","PI","clip","span","sizeText","display","margin","log","innerHTML","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.3b209318.chunk.js","sourcesContent":["import React from 'react';\nimport './FileAdd.css';\n\nfunction FileAdd(props) {\n  const {onChange} = props;\n  const inputEl = React.useRef(null);\n  const [imgSrc, setImgSrc] = React.useState(undefined);\n\n  const fileChange = (e)=>{\n    const file = inputEl.current.files[0];\n    const reader = new FileReader();\n    reader.onload = function() {\n      // const img = new Image();\n      const imgUrl = this.result;\n\n      file.url = imgUrl;\n      onChange(file);\n      setImgSrc(imgUrl);\n      // img.onload = function(){\n      //   // const h = img.height;\n      //   // const w = img.width;\n\n      //   // const canv = document.createElement(\"canvas\");\n      //   // canv.id = \"oldPic\";\n      //   // canv.setAttribute(\"height\",h);\n      //   // canv.setAttribute(\"width\",w);\n\n      //   // const ctx = canv.getContext('2d');\n      //   // ctx.drawImage(img, 0, 0);\n\n      //   // var f = {};\n      //   // f.name = file.name;\n      //   // f.data = oldData;\n      //   file.width = img.width;\n      //   file.height = img.height;\n      //   onChange(file);\n      //   setImgSrc(imgUrl);\n      // }\n      // img.src = imgUrl;\n    }\n    reader.readAsDataURL(file);\n  }\n\n  const remove = ()=>{\n    setImgSrc(undefined);\n    onChange(undefined);\n  }\n\n  return (\n    <div className=\"FileAddComponent\">\n      {!!imgSrc?(\n        <span className=\"imgItem\">\n          <img src={imgSrc} alt='' />\n          <span className=\"removeImg\" onClick={remove}>移除</span>\n        </span>\n      ):(\n        <>\n          <span className=\"selectPicLabel\">选择图片</span>\n          <input ref={inputEl} type=\"file\" accept=\"image/*\" id=\"selectPic\" className=\"selectPic\" onChange={fileChange} />\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default FileAdd;\n","const iOSIcon = {\n  \"images\" : [\n    {\n      \"size\" : \"20x20\",\n      \"idiom\" : \"iphone\",\n      \"filename\" : \"Icon-40.png\",\n      \"scale\" : \"2x\"\n    },\n    {\n      \"size\" : \"20x20\",\n      \"idiom\" : \"iphone\",\n      \"filename\" : \"Icon-60.png\",\n      \"scale\" : \"3x\"\n    },\n    {\n      \"size\" : \"29x29\",\n      \"idiom\" : \"iphone\",\n      \"filename\" : \"Icon-58.png\",\n      \"scale\" : \"2x\"\n    },\n    {\n      \"size\" : \"29x29\",\n      \"idiom\" : \"iphone\",\n      \"filename\" : \"Icon-87.png\",\n      \"scale\" : \"3x\"\n    },\n    {\n      \"size\" : \"40x40\",\n      \"idiom\" : \"iphone\",\n      \"filename\" : \"Icon-80.png\",\n      \"scale\" : \"2x\"\n    },\n    {\n      \"size\" : \"40x40\",\n      \"idiom\" : \"iphone\",\n      \"filename\" : \"Icon-120.png\",\n      \"scale\" : \"3x\"\n    },\n    {\n      \"size\" : \"60x60\",\n      \"idiom\" : \"iphone\",\n      \"filename\" : \"Icon-120.png\",\n      \"scale\" : \"2x\"\n    },\n    {\n      \"size\" : \"60x60\",\n      \"idiom\" : \"iphone\",\n      \"filename\" : \"Icon-180.png\",\n      \"scale\" : \"3x\"\n    },\n    {\n      \"size\" : \"1024x1024\",\n      \"idiom\" : \"ios-marketing\",\n      \"filename\" : \"Icon-1024.png\",\n      \"scale\" : \"1x\"\n    }\n  ],\n  \"info\" : {\n    \"version\" : 1,\n    \"author\" : \"xcode\"\n  }\n}\n\nexport default iOSIcon;","import React from 'react';\nimport './App.css';\nimport FileAdd from './component/FileAdd';\nimport JSZip from 'jszip';\nimport { saveAs } from 'file-saver';\nimport iOSIconJson from './iOSIconJson';\n\nfunction App() {\n  const [file, setFile] = React.useState(undefined);\n  const [sizeIOS, setSizeIOS] = React.useState([1024, 180, 120, 87, 80, 60, 58, 40]);\n  const [sizeAndroid, setSizeAndroid] = React.useState([192, 144, 96, 72, 48]);\n\n  React.useEffect(()=>{\n    if(file && file.url){\n      const img = new Image();\n      img.onload = function(){\n          const h = img.height;\n          const w = img.width;\n          if(h!=1024 || w!=1024){\n            console.warn('图片尺寸不是1024x1024！');\n          }\n\n          const titleIOS = document.createElement(\"div\");\n          const titleIOSText = document.createTextNode(\"iOS图标：\");\n          titleIOS.style.marginTop = '3em';\n          titleIOS.style.marginBottom = '1em';\n          titleIOS.style.fontSize = '2em';\n          titleIOS.appendChild(titleIOSText);\n          document.getElementById('iOS').appendChild(titleIOS);\n\n          const iOSIcon = sizeIOS.map((size)=>{\n            return createCanvas(img, size, 'iOS');\n          });\n\n          const titleAndroid = document.createElement(\"div\");\n          const titleAndroidText = document.createTextNode(\"android图标：\");\n          titleAndroid.style.marginTop = '3em';\n          titleAndroid.style.marginBottom = '1em';\n          titleAndroid.style.fontSize = '2em';\n          titleAndroid.appendChild(titleAndroidText);\n          document.getElementById('iOS').appendChild(titleAndroid);\n\n          const androidIcon = sizeAndroid.map((size)=>{\n            return createCanvas(img, size, 'android');\n          });\n\n          const zip = new JSZip();\n          const iOSFolder = zip.folder(\"iOS\");\n          const iOSFolder_appicon = iOSFolder.folder(\"AppIcon.appiconset\");\n          const androidFolder = zip.folder(\"android\");\n          const androidFolder_m = androidFolder.folder(\"mipmap-mdpi\");\n          const androidFolder_h = androidFolder.folder(\"mipmap-hdpi\");\n          const androidFolder_x = androidFolder.folder(\"mipmap-xhdpi\");\n          const androidFolder_xx = androidFolder.folder(\"mipmap-xxhdpi\");\n          const androidFolder_xxx = androidFolder.folder(\"mipmap-xxxhdpi\");\n\n          iOSFolder_appicon.file('Contents.json', JSON.stringify(iOSIconJson, null, 2));\n          iOSIcon.forEach((item)=>{\n            const base64data = item.ctx.canvas.toDataURL().match(/^data:([A-Za-z-+\\/]+);base64,(.+)$/);\n            iOSFolder_appicon.file(`Icon-${item.size}.png`, base64data[2], {base64: true});\n          });\n\n          androidIcon.forEach((item)=>{\n            const base64data = item.ctx.canvas.toDataURL().match(/^data:([A-Za-z-+\\/]+);base64,(.+)$/);\n            const base64dataRound = item.ctxRound.canvas.toDataURL().match(/^data:([A-Za-z-+\\/]+);base64,(.+)$/);\n            switch(item.size){\n              case 48:\n                androidFolder_m.file(`icon.png`, base64data[2], {base64: true});\n                androidFolder_m.file(`icon_round.png`, base64dataRound[2], {base64: true});\n                androidFolder_m.file(`transparent_round.png`, base64dataRound[2], {base64: true});\n                break;\n              case 72:\n                androidFolder_h.file(`icon.png`, base64data[2], {base64: true});\n                androidFolder_h.file(`icon_round.png`, base64dataRound[2], {base64: true});\n                androidFolder_h.file(`transparent_round.png`, base64dataRound[2], {base64: true});\n                break;\n              case 96:\n                androidFolder_x.file(`icon.png`, base64data[2], {base64: true});\n                androidFolder_x.file(`icon_round.png`, base64dataRound[2], {base64: true});\n                androidFolder_x.file(`transparent_round.png`, base64dataRound[2], {base64: true});\n                break;\n              case 144:\n                androidFolder_xx.file(`icon.png`, base64data[2], {base64: true});\n                androidFolder_xx.file(`icon_round.png`, base64dataRound[2], {base64: true});\n                androidFolder_xx.file(`transparent_round.png`, base64dataRound[2], {base64: true});\n                break;\n              case 192:\n                androidFolder_xxx.file(`icon.png`, base64data[2], {base64: true});\n                androidFolder_xxx.file(`icon_round.png`, base64dataRound[2], {base64: true});\n                androidFolder_xxx.file(`transparent_round.png`, base64dataRound[2], {base64: true});\n                break;\n              default:\n            }\n          });\n\n          zip.generateAsync({type:\"blob\"}).then(function(content) {\n              // see FileSaver.js\n              saveAs(content, \"appIcon.zip\");\n          });\n\n      }\n      img.src = file.url;\n    }\n  }, [file, sizeIOS, sizeAndroid]);\n\n  const createCanvas = (img, size, platform)=>{\n    const canv = document.createElement(\"canvas\");\n    const canvRound = document.createElement(\"canvas\");\n\n    canv.setAttribute(\"height\",size);\n    canv.setAttribute(\"width\",size);\n    const ctx = canv.getContext('2d');\n\n    canvRound.setAttribute(\"height\",size);\n    canvRound.setAttribute(\"width\",size);\n    const ctxRound = canvRound.getContext('2d');\n\n    ctx.drawImage(img, 0, 0, size, size);\n\n    const data = {ctx, size};\n\n    if(platform === 'android'){\n      ctxRound.arc(size*.5, size*.5, size*.5, 0, 2 * Math.PI);\n      ctxRound.clip();\n      // ctxRound.fillRect(0, 0, size,size);\n      ctxRound.drawImage(img, 0, 0, size, size);\n      data.ctxRound = ctxRound;\n    }\n\n    const span = document.createElement(\"span\");\n    const sizeText = document.createTextNode(`${size}x${size}`);\n    span.style.display = 'inline-block';\n    span.style.margin = '1em';\n    canv.style.display = 'block';\n    span.appendChild(canv);\n    span.appendChild(sizeText);\n    document.getElementById(platform).appendChild(span);\n    return data;\n  };\n\n  const fileChange = (file)=>{\n    console.log(file);\n    setFile(file);\n    if(!file){\n      document.getElementById(\"iOS\").innerHTML='';\n      document.getElementById(\"android\").innerHTML='';\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <FileAdd onChange={fileChange} />\n      <span>*建议图片尺寸：1024x1024，可自动生成iOS及android应用图标，并自动下载（zip）,使用谷歌浏览器体验效果更佳。</span>\n      <div id=\"iOS\"></div>\n      <div id=\"android\"></div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}